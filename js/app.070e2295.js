(function(){var e={6700:function(e,t,s){var a={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":6714,"./dv.js":6714,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function r(e){var t=i(e);return s(t)}function i(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=6700},2008:function(e,t,s){"use strict";var a=s(6369),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},i=[],o={name:"app",components:{}},l=o,n=s(1001),c=(0,n.Z)(l,r,i,!1,null,null,null),u=c.exports,m=s(2631),d=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login_container"},[t("div",{staticClass:"login_box"},[e._m(0),t("el-form",{ref:"loginFormRef",staticClass:"login_form",attrs:{rules:e.loginFormRules,"label-width":"0px",model:e.loginForm}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{placeholder:"用户名","suffix-icon":"el-icon-user-solid"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"密码","suffix-icon":"el-icon-lock"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),t("el-form-item",{staticClass:"btns"},[t("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")]),t("el-button",{attrs:{type:"success"},on:{click:e.resetLoginForm}},[e._v("重置")])],1)],1)],1)])},g=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"avatar_box"},[t("img",{attrs:{src:s(6179),alt:""}})])}],p=(s(7658),{name:"login-",data(){return{loginForm:{username:"",password:""},loginFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:21,message:"长度在 3 到 21个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18个字符",trigger:"blur"}]}}},methods:{resetLoginForm(){this.$refs.loginFormRef.resetFields()},login(){this.$refs.loginFormRef.validate((async e=>{if(!e)return this.$message({message:"密码和用户名不能为空哦!",type:"warning"});const{data:t}=await this.$axios.post("login",this.loginForm);if(200!==t.meta.status)return this.$message.error("密码或用户名错误");this.$message({message:"恭喜你，登录成功",type:"success"}),window.sessionStorage.setItem("token",t.data.token),this.$router.push("/home",(()=>{}))}))}}}),h=p,f=(0,n.Z)(h,d,g,!1,null,"1459cc53",null),b=f.exports,v=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"home-container"},[t("el-header",[t("div",[t("img",{attrs:{src:s(6179),alt:""}}),t("span",[e._v("平台")])]),t("el-button",{attrs:{type:"info",size:"medium"},on:{click:e.logout}},[e._v("退出")])],1),t("el-container",[t("el-aside",{attrs:{width:e.isCollapse?"64px":"200px"}},[t("div",{staticClass:"toggle-button",on:{click:e.toggleCollapse}},[e._v(e._s(e.isCollapse?"展开":"收起")+" ")]),t("el-menu",{attrs:{"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b","unique-opened":"",collapse:e.isCollapse,"collapse-transition":!1,router:"","default-active":e.saveNav}},e._l(e.menulist,(function(s,a){return t("el-submenu",{key:a,attrs:{index:a+""}},[t("template",{slot:"title"},[t("i",{class:e.iconsObj[s.id]}),t("span",[e._v(e._s(s.authName)+" ")])]),e._l(s.children,(function(s){return t("el-menu-item",{key:s.id,attrs:{index:"/"+s.path},on:{click:function(t){return e.saveNavState("/"+s.path)}}},[t("i",{staticClass:"el-icon-menu"}),t("span",[e._v(e._s(s.authName)+" ")])])}))],2)})),1)],1),t("el-main",[t("router-view")],1)],1)],1)},y=[],_={name:"home-",created(){this.getMenuList(),this.saveNav=sessionStorage.getItem("saveDate")},data(){return{menulist:[],iconsObj:{125:"el-icon-user-solid",103:"el-icon-star-on",101:"el-icon-zoom-in",102:"el-icon-picture-outline-round",145:"el-icon-s-grid"},isCollapse:!1,saveNav:""}},methods:{logout(){sessionStorage.clear(),this.$router.push("/login"),this.$message({message:"成功退出!",type:"success"})},async getMenuList(){const{data:e}=await this.$axios.get("menus");if(200!==e.meta.status)return this.$message.error(e.meta.msg);this.menulist=e.data},toggleCollapse(){this.isCollapse=!this.isCollapse},saveNavState(e){sessionStorage.setItem("saveDate",e),this.saveNav=e}}},w=_,$=(0,n.Z)(w,v,y,!1,null,"223d4ba6",null),k=$.exports,j=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("welcome-")]),t("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}})],1)},F=[],C={name:"welcome-",data(){return{timeRange:[]}},mounted(){const e=this.$moment().subtract("1","d").format("YYYY-MM-DD HH:mm:ss"),t=this.$moment().format("YYYY-MM-DD HH:mm:ss");this.timeRange=[e,t]}},x=C,D=(0,n.Z)(x,j,F,!1,null,"30834c8a",null),R=D.exports,L=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("用户管理")]),t("el-breadcrumb-item",[e._v("用户列表")])],1),t("el-card",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:7}},[t("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getUserList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1),t("el-col",{attrs:{span:4}},[t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加用户")])],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,border:"",stripe:""}},[t("el-table-column",{attrs:{type:"index",label:"#"}}),t("el-table-column",{attrs:{prop:"username",label:"姓名"}}),t("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),t("el-table-column",{attrs:{prop:"role_name",label:"角色"}}),t("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-switch",{on:{change:function(t){return e.userStateChanged(s.row)}},model:{value:s.row.mg_state,callback:function(t){e.$set(s.row,"mg_state",t)},expression:"scope.row.mg_state"}})]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tooltip",{attrs:{effect:"dark",content:"修改角色",placement:"top",enterable:!1}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(t){return e.showEditDialog(s.row.id)}}})],1),t("el-tooltip",{attrs:{effect:"dark",content:"删除角色",placement:"top",enterable:!1}},[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.removeUserById(s.row.id)}}})],1),t("el-tooltip",{attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[t("el-button",{attrs:{type:"warning",icon:"el-icon-star-off",circle:""},on:{click:function(t){return e.distributeUser(s.row)}}})],1)]}}])})],1),t("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[2,5,10,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClose}},[t("el-form",{ref:"addFromRef",attrs:{model:e.addFrom,rules:e.addFromRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{model:{value:e.addFrom.username,callback:function(t){e.$set(e.addFrom,"username",t)},expression:"addFrom.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{model:{value:e.addFrom.password,callback:function(t){e.$set(e.addFrom,"password",t)},expression:"addFrom.password"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{model:{value:e.addFrom.email,callback:function(t){e.$set(e.addFrom,"email",t)},expression:"addFrom.email"}})],1),t("el-form-item",{attrs:{label:"电话号码",prop:"mobile"}},[t("el-input",{model:{value:e.addFrom.mobile,callback:function(t){e.$set(e.addFrom,"mobile",t)},expression:"addFrom.mobile"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"修改用户",visible:e.showEditDialogVisible,width:"30%"},on:{"update:visible":function(t){e.showEditDialogVisible=t},close:e.editFromClose}},[t("el-form",{ref:"editFromRef",attrs:{model:e.editFrom,rules:e.addFromRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"用户名称",prop:""}},[t("el-input",{attrs:{disabled:!0},model:{value:e.editFrom.username,callback:function(t){e.$set(e.editFrom,"username",t)},expression:"editFrom.username"}})],1),t("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[t("el-input",{model:{value:e.editFrom.mobile,callback:function(t){e.$set(e.editFrom,"mobile",t)},expression:"editFrom.mobile"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{model:{value:e.editFrom.email,callback:function(t){e.$set(e.editFrom,"email",t)},expression:"editFrom.email"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.showEditDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editUserInfo(e.editFrom.id)}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"分配角色",visible:e.distributeDialogVisible,width:"50%"},on:{"update:visible":function(t){e.distributeDialogVisible=t},close:e.distributeDialogClose}},[t("div",[t("p",[e._v("当前用户:"+e._s(e.userInfo.username))]),t("p",[e._v("当前角色:"+e._s(e.userInfo.role_name))])]),t("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.rolesListValue,callback:function(t){e.rolesListValue=t},expression:"rolesListValue"}},e._l(this.rolesList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.roleName,value:e.roleName}})})),1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.distributeDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveRoleInfo}},[e._v("确 定")])],1)],1)],1)},V=[],I=(s(1703),{name:"Users-",data(){const e=(e,t,s)=>{const a=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/;if(a.test(t))return s();s(new Error("请输入正确的邮箱"))},t=(e,t,s)=>{const a=/^(0|86|17951)?(13[0-9]|15[0123456789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;if(a.test(t))return s();s(new Error("请输入正确的电话号码"))};return{queryInfo:{query:"",pagenum:1,pagesize:2},rolesListValue:"",userInfo:{},rolesList:[],distributeDialogVisible:!1,userList:[],total:0,addDialogVisible:!1,showEditDialogVisible:!1,delVisible:!1,editFrom:{},addFrom:{username:"",password:"",email:"",mobile:""},addFromRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:21,message:"长度在 6 到 24个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入电话号码",trigger:"blur"},{validator:t,trigger:"blur"}]}}},created(){this.getUserList()},methods:{async getUserList(){const{data:e}=await this.$axios.get("users",{params:this.queryInfo});if(200!==e.meta.status)return this.$message.error("用户信息获取失败");this.userList=e.data.users,this.total=e.data.total},handleSizeChange(e){this.queryInfo.pagesize=e,this.getUserList()},handleCurrentChange(e){this.queryInfo.pagenum=e,this.getUserList()},async userStateChanged(e){const{data:t}=await this.$axios.put(`users/${e.id}/state/${e.mg_state}`);return 200!==t.meta.status?(e.mg_state=!e.mg_state,this.$message.error("修改失败!")):this.$message.success("修改成功")},addDialogClose(){this.$refs.addFromRef.resetFields()},editFromClose(){this.$refs.editFromRef.resetFields()},addUser(){this.$refs.addFromRef.validate((async e=>{if(!e)return this.$message.error("请输入正确的信息");const{data:t}=await this.$axios.post("users",this.addFrom);return 201!==t.meta.status?this.$message.error(t.meta.msg):(this.addDialogVisible=!1,this.getUserList(),this.$message.success("添加成功"))}))},async showEditDialog(e){const{data:t}=await this.$axios.get("users/"+e);if(200!==t.meta.status)return this.$message.error(t.meta.msg);this.editFrom=t.data,this.showEditDialogVisible=!0},editUserInfo(e){this.$refs.editFromRef.validate((async t=>{if(!t)return this.$message.error("请填写正确的信息");const{data:s}=await this.$axios.put("users/"+e,this.editFrom);if(200!==s.meta.status)return this.$message.error(s.meta.msg);this.getUserList(),this.showEditDialogVisible=!1,this.$message.success(s.meta.msg)}))},async removeUserById(e){const t=await this.$confirm("此操作将永久删除该用户, 是否继续?","警告!",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((e=>e));if("confirm"!==t)return this.$message.info("已取消删除");const{data:s}=await this.$axios.delete("users/"+e);if(200!==s.meta.status)return this.$message.error(s.meta.msg);this.getUserList(),this.$message.success(s.meta.msg)},async distributeUser(e){this.userInfo=e;const{data:t}=await this.$axios.get("roles");return 200!==t.meta.status?this.$message.error(t.meta.msg):(this.rolesList=t.data,this.distributeDialogVisible=!0,this.$message.success(t.meta.msg))},async saveRoleInfo(){if(!this.rolesListValue)return this.$message.error("请选择新角色");const{data:e}=await this.$axios.put(`users/${this.userInfo.id}/role`,{rid:this.rolesListValue});return 200!==e.meta.status?this.$message.error(e.meta.msg):(this.distributeDialogVisible=!1,this.getUserList(),this.$message.success(e.meta.msg))},distributeDialogClose(){this.rolesListValue="",this.userInfo={}}}}),z=I,N=(0,n.Z)(z,L,V,!1,null,"4b6b55b7",null),S=N.exports,O=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("权限管理")]),t("el-breadcrumb-item",[e._v("权限列表")])],1),t("el-card",[t("el-table",{ref:"rightsListTable",staticStyle:{width:"100%"},attrs:{data:e.rightsList,"highlight-current-row":"",border:"",stripe:""}},[t("el-table-column",{attrs:{type:"index",label:"#",width:"50"}}),t("el-table-column",{attrs:{prop:"authName",label:"权限名字"}}),t("el-table-column",{attrs:{prop:"path",label:"权限路径"}}),t("el-table-column",{attrs:{prop:"level",label:"权限等级"},scopedSlots:e._u([{key:"default",fn:function(s){return["0"===s.row.level?t("el-tag",{attrs:{type:"success"}},[e._v("一级标签")]):"1"===s.row.level?t("el-tag",{attrs:{type:"info"}},[e._v("二级标签 ")]):"2"===s.row.level?t("el-tag",{attrs:{type:"warning"}},[e._v(" 三级标签")]):t("el-tag",{attrs:{type:"danger"}},[e._v(" 其他等级标签")])]}}])})],1)],1)],1)},E=[],q={name:"rights-",data(){return{rightsList:[]}},created(){this.getRightsList()},methods:{async getRightsList(){const{data:e}=await this.$axios.get("rights/list");return 200!==e.meta.status?this.$message.error(e.meta.msg):(this.rightsList=e.data,this.$message.success(e.meta.msg))}}},T=q,U=(0,n.Z)(T,O,E,!1,null,"b75a1d90",null),P=U.exports,B=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("权限管理")]),t("el-breadcrumb-item",[e._v("角色列表")])],1),t("el-card",[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.rolesAddDialogVisible=!0}}},[e._v("添加角色")])],1)],1),t("el-table",{attrs:{data:e.rolesList,border:"",stripe:""}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("pre",[e._v("           "),e._v("\n           "),e._l(s.row.children,(function(a){return t("el-row",{key:a.id,staticClass:"bore vcenter"},[e._v("\n            "),e._v("\n             "),t("el-col",{staticClass:"vcenter",attrs:{span:5}},[e._v("\n              "),t("el-tag",{attrs:{size:"small",closable:""},on:{close:function(t){return e.handleClose(s.row,a.id)}}},[e._v(e._s(a.authName)+"\n\n                ")]),e._v("  "),t("i",{staticClass:"el-icon-caret-right"}),e._v("\n             ")],1),e._v("\n             "),e._v("\n             "),t("el-col",{attrs:{span:19}},[e._v("\n              "),e._l(a.children,(function(a){return t("el-row",{key:a.id},[e._v("\n                "),t("el-col",{attrs:{span:5}},[e._v("\n                  "),t("el-tag",{attrs:{size:"small",type:"success",closable:""},on:{close:function(t){return e.handleClose(s.row,a.id)}}},[e._v(e._s(a.authName)+" ")]),e._v(" "),t("i",{staticClass:"el-icon-caret-right"}),e._v("\n                ")],1),e._v("\n                "),e._v("\n                "),t("el-col",{attrs:{span:19}},[e._v("\n                      "),e._l(a.children,(function(a){return t("el-tag",{key:a.id,attrs:{closable:""},on:{close:function(t){return e.handleClose(s.row,a.id)}}},[e._v(e._s(a.authName)+" ")])})),e._v("\n                ")],2),e._v("\n              ")],1)})),e._v("\n             ")],2),e._v("\n           ")],1)})),e._v("\n          ")],2)]}}])}),t("el-table-column",{attrs:{label:"#",type:"index"}}),t("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),t("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.showEditDialog(s.row.id)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(t){return e.removeUserById(s.row.id)}}},[e._v("删除")]),t("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.showSetRightDialog(s.row)}}},[e._v("分配权限")])]}}])})],1)],1),t("el-dialog",{attrs:{title:"添加用户",visible:e.rolesAddDialogVisible,width:"50%"},on:{"update:visible":function(t){e.rolesAddDialogVisible=t},close:e.addDialogClose}},[t("el-form",{ref:"rolesListFromRef",attrs:{model:e.rolesFrom,rules:e.rolesFromRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[t("el-input",{model:{value:e.rolesFrom.roleName,callback:function(t){e.$set(e.rolesFrom,"roleName",t)},expression:"rolesFrom.roleName"}})],1),t("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[t("el-input",{model:{value:e.rolesFrom.roleDesc,callback:function(t){e.$set(e.rolesFrom,"roleDesc",t)},expression:"rolesFrom.roleDesc"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.rolesAddDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"修改用户",visible:e.showEditDialogVisible,width:"30%"},on:{"update:visible":function(t){e.showEditDialogVisible=t},close:e.editFromClose}},[t("el-form",{ref:"editFromRef",attrs:{model:e.editFrom,rules:e.rolesFromRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"ID"}},[t("el-input",{model:{value:e.editFrom.roleId,callback:function(t){e.$set(e.editFrom,"roleId",t)},expression:"editFrom.roleId"}})],1),t("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[t("el-input",{model:{value:e.editFrom.roleName,callback:function(t){e.$set(e.editFrom,"roleName",t)},expression:"editFrom.roleName"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"roleDesc"}},[t("el-input",{model:{value:e.editFrom.roleDesc,callback:function(t){e.$set(e.editFrom,"roleDesc",t)},expression:"editFrom.roleDesc"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.showEditDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editUserInfo(e.editFrom.roleId)}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"角色分配",visible:e.showSetRightDialogBl,width:"50%"},on:{"update:visible":function(t){e.showSetRightDialogBl=t},close:e.setRightClose}},[t("el-tree",{ref:"treeRef",attrs:{data:e.rightList,props:e.treeProps,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":e.defKeys}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.showSetRightDialogBl=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.allotRights()}}},[e._v("确 定")])],1)],1)],1)},A=[],M={name:"roles-",data(){return{rolesFrom:{roleName:"",roleDesc:"",roleId:0},treeProps:{label:"authName",children:"children"},defKeys:[],roleID:"",rightList:[],editFrom:{},rolesList:[],rolesAddDialogVisible:!1,showEditDialogVisible:!1,showSetRightDialogBl:!1,rolesFromRules:{roleName:[{required:!0,message:"请输入内容123",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10个字符",trigger:"blur"}],roleDesc:[{min:1,max:10,message:"长度在 1 到 10个字符",trigger:"blur"}],roleId:[{required:!0,message:"请输入内容123",trigger:"blur"}]}}},created(){this.getRolesList()},methods:{async getRolesList(){const{data:e}=await this.$axios.get("roles");return 200!==e.meta.status?this.$message.error(e.meta.msg):(this.rolesList=e.data,this.$message.success(e.meta.msg))},addDialogClose(){this.$refs.rolesListFromRef.resetFields()},addUser(){this.$refs.rolesListFromRef.validate((async e=>{if(!e)return this.$message.error("请输入正确的信息");const{data:t}=await this.$axios.post("roles",this.rolesFrom);return 201!==t.meta.status?this.$message.error(t.meta.msg):(this.rolesAddDialogVisible=!1,this.getRolesList(),this.$message.success("添加成功"))}))},async showEditDialog(e){const{data:t}=await this.$axios.get("roles/"+e);if(200!==t.meta.status)return this.$message.error(t.meta.msg);this.editFrom=t.data,this.showEditDialogVisible=!0},editUserInfo(e){this.$refs.editFromRef.validate((async t=>{if(!t)return this.$message.error("请填写正确的信息");const{data:s}=await this.$axios.put("roles/"+e,this.editFrom);if(200!==s.meta.status)return this.$message.error(s.meta.msg);this.getRolesList(),this.showEditDialogVisible=!1,this.$message.success(s.meta.msg)}))},editFromClose(){this.$refs.editFromRef.resetFields()},async removeUserById(e){const t=await this.$confirm("此操作将永久删除该用户, 是否继续?","警告!",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((e=>e));if("confirm"!==t)return this.$message.info("已取消删除");const{data:s}=await this.$axios.delete("roles/"+e);if(200!==s.meta.status)return this.$message.error(s.meta.msg);this.getRolesList(),this.$message.success(s.meta.msg)},async handleClose(e,t){const s=await this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((e=>e));if("confirm"!==s)return this.$message.info("取消删除");const{data:a}=await this.$axios.delete(`roles/${e.id}/rights/${t}`);return 200!==a.meta.status?this.$message.error(a.meta.msg):(e.children=a.data,this.$message.success(a.meta.msg))},async showSetRightDialog(e){const{data:t}=await this.$axios.get("rights/tree");return 200!==t.meta.status?this.$message.error(t.meta.msg):(this.roleID=e.id,this.rightList=t.data,this.getLeafKeys(e,this.defKeys),this.showSetRightDialogBl=!0,this.$message.success(t.meta.msg))},getLeafKeys(e,t){if(!e.children)return t.push(e.id);e.children.forEach((e=>{this.getLeafKeys(e,t)}))},setRightClose(){this.defKeys=[]},async allotRights(){const e=[...this.$refs.treeRef.getCheckedKeys(),...this.$refs.treeRef.getHalfCheckedKeys()],t=e.join(","),{data:s}=await this.$axios.post(`roles/${this.roleID}/rights`,{rids:t});return 200!==s.meta.status?this.$message.error(s.meta.msg):(this.getRolesList(),this.showSetRightDialogBl=!1,this.$message.success(s.meta.msg))}}},Z=M,K=(0,n.Z)(Z,B,A,!1,null,"2adb7bc2",null),Y=K.exports,H=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("商品管理")]),t("el-breadcrumb-item",[e._v("商品分类")])],1),t("el-card",[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"info"},on:{click:e.showAddCateDialog}},[e._v("添加商品")])],1)],1),t("zk-table",{attrs:{data:e.cateList,columns:e.columns,"selection-type":!1,"expand-type":!1,"show-index":"","index-text":"#",border:"","show-row-hover":""},scopedSlots:e._u([{key:"isOk",fn:function(e){return[!1===e.row.cat_deleted?t("i",{staticClass:"el-icon-check"}):t("i",{staticClass:"el-icon-close"})]}},{key:"order",fn:function(s){return[0===s.row.cat_level?t("el-tag",[e._v("一级")]):1===s.row.cat_level?t("el-tag",{attrs:{type:"success"}},[e._v("二级")]):t("el-tag",{attrs:{type:"info"}},[e._v("三级")])]}},{key:"operate",fn:function(s){return[t("el-button",{attrs:{type:"success"},on:{click:function(t){return e.editCateFn(s.row.cat_id)}}},[e._v(" 编辑 ")]),t("el-button",{attrs:{type:"info"},on:{click:function(t){return e.removeCate(s.row.cat_id)}}},[e._v(" 删除 ")])]}}])}),t("el-pagination",{attrs:{"current-page":e.querInfo.pagenum,"page-sizes":[5,10,15,50],"page-size":e.querInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"商品添加",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addCateDialogClose}},[t("el-form",{ref:"addCateFromRef",attrs:{model:e.addCateFrom,rules:e.addCateFromRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"分类名称:",prop:"cat_name"}},[t("el-input",{model:{value:e.addCateFrom.cat_name,callback:function(t){e.$set(e.addCateFrom,"cat_name",t)},expression:"addCateFrom.cat_name"}})],1),t("el-form-item",{attrs:{label:"父级分类名称:"}},[t("el-cascader",{attrs:{options:e.parentCateList,props:e.cascaderProps,clearable:""},on:{change:e.parentCateChange},model:{value:e.selectedOptions2,callback:function(t){e.selectedOptions2=t},expression:"selectedOptions2"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addCate}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"编辑商品名称",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[t("el-form",{ref:"editRuleForm",attrs:{model:e.editRuleForm,rules:e.editRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"活动名称",prop:"cat_name"}},[t("el-input",{model:{value:e.editRuleForm.cat_name,callback:function(t){e.$set(e.editRuleForm,"cat_name",t)},expression:"editRuleForm.cat_name"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCate(e.editRuleForm.cat_id)}}},[e._v("确 定")])],1)],1)],1)},G=[],J={name:"cate-",data(){return{cateList:[],querInfo:{type:3,pagenum:1,pagesize:5},selectedOptions2:[],total:0,columns:[{label:"分类名称",prop:"cat_name"},{label:"是否有效",type:"template",template:"isOk"},{label:"排序",type:"template",template:"order"},{label:"操作",type:"template",template:"operate"}],addDialogVisible:!1,editDialogVisible:!1,editRuleForm:{},addCateFrom:{cat_name:"",cat_pid:0,cat_level:0},editRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},addCateFromRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},parentCateList:[],cascaderProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children",checkStrictly:!0}}},created(){this.getCateList()},methods:{async getCateList(){const{data:e}=await this.$axios.get("categories",{params:this.querInfo});return 200!==e.meta.status?this.$message.error(e.meta.msg):(this.cateList=e.data.result,this.total=e.data.total,this.$message.success(e.meta.msg))},handleSizeChange(e){this.querInfo.pagesize=e,this.getCateList()},handleCurrentChange(e){this.querInfo.pagenum=e,this.getCateList()},showAddCateDialog(){this.getParentCateList(),this.addDialogVisible=!0},async getParentCateList(){const{data:e}=await this.$axios.get("categories",{params:{type:2}});return 200!==e.meta.status?this.$message.error(e.meta.msg):(this.parentCateList=e.data,this.$message.success(e.meta.msg))},parentCateChange(){this.selectedOptions2.length>0?(this.addCateFrom.cat_pid=this.selectedOptions2[this.selectedOptions2.length-1],this.addCateFrom.cat_level=this.selectedOptions2.length):(this.addCateFrom.cat_pid=0,this.addCateFrom.cat_level=0)},async addCate(){const{data:e}=await this.$axios.post("categories",this.addCateFrom);if(201!==e.meta.status)return this.$message.error(e.meta.msg);this.$message.success(e.meta.msg),this.getCateList(),this.addDialogVisible=!1},addCateDialogClose(){this.$refs.addCateFromRef.resetFields(),this.selectedOptions2=[]},async editCateFn(e){const{data:t}=await this.$axios.get("categories/"+e);return this.editRuleForm=t.data,200!==t.meta.status?this.$message.error(t.meta.msg):(this.editDialogVisible=!0,this.$message.success(t.meta.msg))},editCate(e){this.$refs.editRuleForm.validate((async t=>{if(!t)return this.$message.error("请填写正确的信息");const{data:s}=await this.$axios.put("categories/"+e,this.editRuleForm);if(200!==s.meta.status)return this.$message.error(s.meta.msg);this.getCateList(),this.editDialogVisible=!1,this.$message.success(s.meta.msg)}))},async removeCate(e){const t=await this.$confirm("此操作将永久删除该用户, 是否继续?","警告!",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((e=>e));if("confirm"!==t)return this.$message.info("已取消删除");const{data:s}=await this.$axios.delete("categories/"+e);if(200!==s.meta.status)return this.$message.error(s.meta.msg);this.getCateList(),this.$message.success(s.meta.msg)}}},Q=J,W=(0,n.Z)(Q,H,G,!1,null,"64f3ed93",null),X=W.exports,ee=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("商品管理")]),t("el-breadcrumb-item",[e._v("分类参数")])],1),t("el-card",[t("el-alert",{attrs:{title:"注意只显示第三级标签",type:"info",effect:"dark",closable:!1,"show-icon":""}}),t("el-row",{staticClass:"cat_opt"},[t("el-col",[t("span",[e._v("选择商品分类:")]),t("el-cascader",{staticClass:"interval",attrs:{options:e.cateList,props:e.cateProps,clearable:""},on:{change:e.parentCateChange},model:{value:e.selectedOptions2,callback:function(t){e.selectedOptions2=t},expression:"selectedOptions2"}})],1),t("el-col")],1),t("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[t("el-button",{attrs:{type:"primary",disabled:e.isBtnDisabled},on:{click:function(t){e.activeNameVisible=!0}}},[e._v("添加参数")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manyList,height:"250",border:""}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(s){return[e._l(s.row.attr_vals,(function(a,r){return t("el-tag",{key:r,staticClass:"interval",attrs:{type:"",closable:""},on:{close:function(t){return e.handleClose(r,s.row)}}},[e._v(" "+e._s(a)+" ")])})),s.row.inputVisible?t("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(t){return e.handleInputConfirm(s.row)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(s.row)}},model:{value:s.row.inputValue,callback:function(t){e.$set(s.row,"inputValue",t)},expression:"scope.row.inputValue"}}):t("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(t){return e.showInput(s.row)}}},[e._v("添加标签 ")])]}}])}),t("el-table-column",{attrs:{label:"@",type:"index"}}),t("el-table-column",{attrs:{label:"名称",prop:"attr_name"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top",enterable:!1}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(t){return e.showEditDialog(s.row.attr_id)}}})],1),t("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top",enterable:!1}},[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.delDialog(s.row.attr_id)}}})],1)]}}])})],1)],1),t("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[t("el-button",{attrs:{type:"primary",disabled:e.isBtnDisabled},on:{click:function(t){e.activeNameVisible=!0}}},[e._v("添加属性")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.onlyList,height:"250",border:""}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(s){return[e._l(s.row.attr_vals,(function(a,r){return t("el-tag",{key:r,staticClass:"interval",attrs:{type:"",closable:""},on:{close:function(t){return e.handleClose(r,s.row)}}},[e._v(" "+e._s(a)+" ")])})),s.row.inputVisible?t("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(t){return e.handleInputConfirm(s.row)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(s.row)}},model:{value:s.row.inputValue,callback:function(t){e.$set(s.row,"inputValue",t)},expression:"scope.row.inputValue"}}):t("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(t){return e.showInput(s.row)}}},[e._v("添加标签 ")])]}}])}),t("el-table-column",{attrs:{label:"@",type:"index"}}),t("el-table-column",{attrs:{label:"名称",prop:"attr_name"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top",enterable:!1}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(t){return e.showEditDialog(s.row.attr_id)}}})],1),t("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top",enterable:!1}},[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.delDialog(s.row.attr_id)}}})],1)]}}])})],1)],1)],1)],1),t("el-dialog",{attrs:{title:e.titleDlog,visible:e.activeNameVisible,width:"50%"},on:{"update:visible":function(t){e.activeNameVisible=t},close:e.addRuleFormClose}},[t("el-form",{ref:"addRuleFormRef",attrs:{model:e.addRuleForm,rules:e.addRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:e.titleDlog,prop:"attr_name"}},[t("el-input",{model:{value:e.addRuleForm.attr_name,callback:function(t){e.$set(e.addRuleForm,"attr_name",t)},expression:"addRuleForm.attr_name"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.activeNameVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addRuleFormFn()}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"修改内容",visible:e.reviseNameVisible,width:"50%"},on:{"update:visible":function(t){e.reviseNameVisible=t},close:e.reviseFormClose}},[t("el-form",{ref:"reviseRuleFormRef",attrs:{model:e.reviseRuleForm,rules:e.reviseRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"请输入修改的名称:",prop:"attr_name"}},[t("el-input",{model:{value:e.reviseRuleForm.attr_name,callback:function(t){e.$set(e.reviseRuleForm,"attr_name",t)},expression:"reviseRuleForm.attr_name"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.reviseNameVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.reviseParma}},[e._v("确 定")])],1)],1)],1)},te=[],se={name:"goodsParams",created(){this.getCateList()},data(){return{cateList:[],manyList:[],onlyList:[],addRuleForm:{attr_name:""},addRules:{attr_name:[{required:!0,message:"请输入内容",trigger:"blur"}]},reviseRules:{attr_name:[{required:!0,message:"请输入内容",trigger:"blur"}]},activeNameVisible:!1,reviseNameVisible:!1,inputVisible:!1,inputValue:"",reviseRuleForm:{attr_name:"",attr_id:""},selectedOptions2:"",cateProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"},activeName:"many"}},methods:{async getCateList(){const{data:e}=await this.$axios.get("categories");return 200!==e.meta.status?this.$message.error(e.meta.msg):(this.cateList=e.data,this.$message.success(e.meta.msg))},parentCateChange(){this.getParamsData()},async getParamsData(){if(3!==this.selectedOptions2.length)return this.selectedOptions2=[],this.manyList=[],void(this.onlyList=[]);const{data:e}=await this.$axios.get(`categories/${this.cateId}/attributes`,{params:{sel:this.activeName}});return 200!==e.meta.status?this.$message.error(e.meta.msg):(e.data.forEach((e=>{e.attr_vals=e.attr_vals?e.attr_vals.split(","):[],e.inputVisible=!1,e.inputValue=""})),"many"===this.activeName?this.manyList=e.data:this.onlyList=e.data,this.$message.success(e.meta.msg))},handleTabClick(){this.getParamsData()},addRuleFormClose(){this.$refs.addRuleFormRef.resetFields()},addRuleFormFn(){this.$refs.addRuleFormRef.validate((async e=>{if(!e)return;const{data:t}=await this.$axios.post(`categories/${this.cateId}/attributes`,{attr_name:this.addRuleForm.attr_name,attr_sel:this.activeName});return 201!==t.meta.status?this.$message.error(t.meta.msg):(this.getParamsData(),this.activeNameVisible=!1,this.$message.success(t.meta.msg))}))},async showEditDialog(e){const{data:t}=await this.$axios.get(`categories/${this.cateId}/attributes/${e}`,{params:{attr_sel:this.activeName}});return 200!==t.meta.status?this.$message.error(t.meta.msg):(this.reviseRuleForm=t.data,this.reviseNameVisible=!0,this.$message.success(t.meta.msg))},reviseParma(){this.$refs.reviseRuleFormRef.validate((async e=>{if(!e)return this.$message.error("请输入正确的字段");const{data:t}=await this.$axios.put(`categories/${this.cateId}/attributes/${this.reviseRuleForm.attr_id}`,{attr_name:this.reviseRuleForm.attr_name,attr_sel:this.activeName});return 200!==t.meta.status?this.$message.error(t.meta.msg):(this.getParamsData(),this.reviseNameVisible=!1,this.$message.success(t.meta.msg))}))},reviseFormClose(){this.$refs.reviseRuleFormRef.resetFields()},async delDialog(e){const t=await this.$confirm("此操作将永久删除该参数, 是否继续?","删除内容",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((e=>e));if("confirm"!==t)return this.$message.error("用户取消");const{data:s}=await this.$axios.delete(`categories/${this.cateId}/attributes/${e}`);return 200!==s.meta.status?this.$message.error(s.meta.msg):(this.getParamsData(),this.$message.success(s.meta.msg))},async handleInputConfirm(e){if(0===e.inputValue.trim().length)return e.inputValue="",e.inputVisible=!1,this.$message.error("输入的字符不合法");e.attr_vals.push(e.inputValue.trim()),e.inputValue="",e.inputVisible=!1;const{data:t}=await this.$axios.put(`categories/${this.cateId}/attributes/${e.attr_id}`,{attr_name:e.attr_name,attr_sel:e.attr_sel,attr_vals:e.attr_vals.join(",")});return 200!==t.meta.status?this.$message.error(t.meta.msg):this.$message.success(t.meta.msg)},handleClose(e,t){t.attr_vals.splice(e,1),this.saveAttribute(t)},async saveAttribute(e){const{data:t}=await this.$axios.put(`categories/${this.cateId}/attributes/${e.attr_id}`,{attr_name:e.attr_name,attr_sel:e.attr_sel,attr_vals:e.attr_vals.join(",")});return 200!==t.meta.status?this.$message.error(t.meta.msg):this.$message.success(t.meta.msg)},showInput(e){e.inputVisible=!0,this.$nextTick((e=>{this.$refs.saveTagInput.$refs.input.focus()}))}},computed:{isBtnDisabled(){return 3!==this.selectedOptions2.length},cateId(){return 3===this.selectedOptions2.length?this.selectedOptions2[2]:null},titleDlog(){return"many"===this.activeName?"添加动态参数":"添加静态属性"}}},ae=se,re=(0,n.Z)(ae,ee,te,!1,null,"2f67c47c",null),ie=re.exports;a["default"].use(m.ZP);const oe=new m.ZP({routes:[{path:"/",redirect:"/login"},{path:"/login",component:b},{path:"/home",component:k,redirect:"/welcome",children:[{path:"/welcome",component:R},{path:"/users",component:S},{path:"/rights",component:P},{path:"/roles",component:Y},{path:"/categories",component:X},{path:"/params",component:ie},{path:"/orders",component:()=>s.e(991).then(s.bind(s,6991))},{path:"/goods",component:()=>s.e(288).then(s.bind(s,2288))},{path:"/goods/add",component:()=>Promise.all([s.e(806),s.e(971)]).then(s.bind(s,3971))},{path:"/reports",component:()=>Promise.all([s.e(806),s.e(929)]).then(s.bind(s,8929))}]}]});oe.beforeEach(((e,t,s)=>{if("/login"===e.path)return s();const a=sessionStorage.getItem("token");if(!a)return s("/login");s()}));var le=oe,ne=s(8499),ce=s.n(ne);a["default"].prototype.$message=ne.Message,a["default"].prototype.$confirm=ne.MessageBox,a["default"].use(ce());var ue=s(6265),me=s.n(ue),de=s(6790),ge=s.n(de),pe=s(7715),he=s.n(pe);a["default"].use(he()),a["default"].filter("dateFormat",(function(e,t=""){const s=new Date(e),a=s.getFullYear(),r=(s.getMonth()+1).toString().padStart(2,"0"),i=s.getDate().toString().padStart(2,"0");if("yyyy-mm-dd"===t.toLowerCase())return`${a}-${r}-${i}`;{const e=s.getHours().toString().padStart(2,"0"),t=s.getMinutes().toString().padStart(2,"0"),o=s.getSeconds().toString().padStart(2,"0");return`${a}-${r}-${i} ${e}:${t}:${o}`}}));var fe=s(6797),be=s.n(fe),ve=s(530),ye=s.n(ve);a["default"].use(ge()),me().defaults.baseURL="http://127.0.0.1:8888/api/private/v1/",me().interceptors.request.use((e=>(e.headers.Authorization=sessionStorage.getItem("token"),ye().start(),e))),me().interceptors.response.use((e=>(ye().done(),e))),a["default"].config.productionTip=!1,a["default"].prototype.$axios=me(),a["default"].prototype.$moment=be(),new a["default"]({router:le,render:e=>e(u)}).$mount("#app")},6179:function(e,t,s){"use strict";e.exports=s.p+"img/laya.b4384602.webp"}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=e,function(){var e=[];s.O=function(t,a,r,i){if(!a){var o=1/0;for(u=0;u<e.length;u++){a=e[u][0],r=e[u][1],i=e[u][2];for(var l=!0,n=0;n<a.length;n++)(!1&i||o>=i)&&Object.keys(s.O).every((function(e){return s.O[e](a[n])}))?a.splice(n--,1):(l=!1,i<o&&(o=i));if(l){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[a,r,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,a){return s.f[a](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/"+e+"."+{288:"303cb98e",806:"1036513c",929:"423b7d60",971:"c26bd28b",991:"e75aad3d"}[e]+".js"}}(),function(){s.miniCssF=function(e){return"css/"+e+".fb97ae5b.css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vue_shop:";s.l=function(a,r,i,o){if(e[a])e[a].push(r);else{var l,n;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var m=c[u];if(m.getAttribute("src")==a||m.getAttribute("data-webpack")==t+i){l=m;break}}l||(n=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.setAttribute("data-webpack",t+i),l.src=a),e[a]=[r];var d=function(t,s){l.onerror=l.onload=null,clearTimeout(g);var r=e[a];if(delete e[a],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((function(e){return e(s)})),t)return t(s)},g=setTimeout(d.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=d.bind(null,l.onerror),l.onload=d.bind(null,l.onload),n&&document.head.appendChild(l)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/"}(),function(){var e=function(e,t,s,a){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var i=function(i){if(r.onerror=r.onload=null,"load"===i.type)s();else{var o=i&&("load"===i.type?"missing":i.type),l=i&&i.target&&i.target.href||t,n=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");n.code="CSS_CHUNK_LOAD_FAILED",n.type=o,n.request=l,r.parentNode.removeChild(r),a(n)}};return r.onerror=r.onload=i,r.href=t,document.head.appendChild(r),r},t=function(e,t){for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var r=s[a],i=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(i===e||i===t))return r}var o=document.getElementsByTagName("style");for(a=0;a<o.length;a++){r=o[a],i=r.getAttribute("data-href");if(i===e||i===t)return r}},a=function(a){return new Promise((function(r,i){var o=s.miniCssF(a),l=s.p+o;if(t(o,l))return r();e(a,l,r,i)}))},r={143:0};s.f.miniCss=function(e,t){var s={971:1};r[e]?t.push(r[e]):0!==r[e]&&s[e]&&t.push(r[e]=a(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}(),function(){var e={143:0};s.f.j=function(t,a){var r=s.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var i=new Promise((function(s,a){r=e[t]=[s,a]}));a.push(r[2]=i);var o=s.p+s.u(t),l=new Error,n=function(a){if(s.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var i=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,r[1](l)}};s.l(o,n,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,i,o=a[0],l=a[1],n=a[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in l)s.o(l,r)&&(s.m[r]=l[r]);if(n)var u=n(s)}for(t&&t(a);c<o.length;c++)i=o[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(u)},a=self["webpackChunkvue_shop"]=self["webpackChunkvue_shop"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(2008)}));a=s.O(a)})();
//# sourceMappingURL=app.070e2295.js.map